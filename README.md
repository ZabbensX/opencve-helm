# opencve-helm

## DISCLAIMER

This helm chart could to be used in production environments without working registration! Users are managed by admin user which must be created manually.

## Installation

```
git clone https://github.com/cleveritcz/opencve-helm.git
cd opencve-helm
helm install opencve . -n opencve --create-namespace
```

- Check if everything is running except opencve-celery-beat 
```
kubectl get all -n opencve
```

- Then run these commands:
```
export POD_NAME=$(kubectl get pods --namespace opencve -l "app=webserver" -o jsonpath="{.items[0].metadata.name}")
kubectl exec -it $POD_NAME -n opencve -- opencve create-user john john.doe@example.com --admin
```


export POD_NAME=$(kubectl get pods --namespace opencve -l "app=webserver" -o jsonpath="{.items[0].metadata.name}")
kubectl exec -it $POD_NAME -n opencve -- opencve create-user john john.doe@example.com --admin
```

## Caveats

- Please note that the initialization can take several minutes while OpenCVE downloads and imports the CVEs, CPEs and co.
- Even when uninstalling the pvc will remain on the k8s cluster. If you change certain settings (like postgres passwords) you need to delete the pvc manually and let the init container reinitialize it. 
